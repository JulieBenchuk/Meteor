# –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–π –ø–ª–∞–Ω –∏–∑—É—á–µ–Ω–∏—è Meteor.js –∑–∞ 2-3 —á–∞—Å–∞

## –ò–≥—Ä–∞: Tic-Tac-Toe (–ö—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏) —Å –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–æ–º

–ò–∑—É—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Ç–µ–æ—Ä–∏—é + –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è. –ö–æ–¥ –ø–∏—à–µ—à—å —Å–∞–º–∞!

---

## ‚ö° –≠—Ç–∞–ø 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (30 –º–∏–Ω)

### üìö –¢–µ–æ—Ä–∏—è

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ Meteor –ø—Ä–æ–µ–∫—Ç–∞:**
- `/client` - –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- `/server` - –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- `/imports` - –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ, –∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- `/public` - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —à—Ä–∏—Ñ—Ç—ã)

**Hot-reload:**
- Meteor –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤
- –ù–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –æ–±–Ω–æ–≤–ª—è—Ç—å –±—Ä–∞—É–∑–µ—Ä

**TypeScript:**
- Meteor –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç TypeScript –∏–∑ –∫–æ—Ä–æ–±–∫–∏
- –§–∞–π–ª—ã `.ts` –∏ `.tsx` –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### üìù –ó–∞–¥–∞–Ω–∏–µ

1. –°–æ–∑–¥–∞–π –ø—Ä–æ–µ–∫—Ç:
   ```bash
   meteor create --typescript tic-tac-toe
   cd tic-tac-toe
   meteor npm install
   meteor
   ```

2. –ò–∑—É—á–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–∑–¥–∞–ª–∏—Å—å

3. –°–æ–∑–¥–∞–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `GameBoard.tsx` –≤ `/client/components/`:
   - 3x3 —Å–µ—Ç–∫–∞ –∫–ª–µ—Ç–æ–∫ (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å div'—ã –∏–ª–∏ button'—ã)
   - –õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é `useState` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–æ—Å–∫–∏ (–º–∞—Å—Å–∏–≤ –∏–∑ 9 —ç–ª–µ–º–µ–Ω—Ç–æ–≤: null, 'X', –∏–ª–∏ 'O')
   - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ –∫–ª–µ—Ç–∫—É - –º–µ–Ω—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –º–∞—Å—Å–∏–≤–µ
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ 'X' –∏–ª–∏ 'O' –≤ –∫–ª–µ—Ç–∫–∞—Ö
   - –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ (CSS –∏–ª–∏ inline)

4. –ü–æ–¥–∫–ª—é—á–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ `client/main.tsx`

**–¶–µ–ª—å:** –ü–æ–Ω—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Å–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—É—é UI –±–µ–∑ Meteor —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.

---

## ‚ö° –≠—Ç–∞–ø 2: –ö–æ–ª–ª–µ–∫—Ü–∏–∏ –∏ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (40 –º–∏–Ω)

### üìö –¢–µ–æ—Ä–∏—è

**MongoDB –ö–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ Meteor:**
- `Mongo.Collection` - —ç—Ç–æ –æ–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ MongoDB –∫–æ–ª–ª–µ–∫—Ü–∏–µ–π
- –ö–æ–ª–ª–µ–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ, –∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ –µ—Å—Ç—å Minimongo - –ª–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–ø–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ë–î
- –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:**
- Meteor –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—è—Ö
- –ö–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –º–µ–Ω—è—é—Ç—Å—è, –≤—Å–µ –º–µ—Å—Ç–∞, –≥–¥–µ –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è
- `useTracker()` - React hook –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –í–Ω—É—Ç—Ä–∏ `useTracker()` –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```typescript
const game = useTracker(() => Games.findOne(gameId));
// –ï—Å–ª–∏ –≤ –ë–î –∏–∑–º–µ–Ω–∏—Ç—Å—è –∏–≥—Ä–∞ —Å —ç—Ç–∏–º gameId, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è
```

**–ü—Ä—è–º–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ (–ø–æ–∫–∞ –±–µ–∑ –º–µ—Ç–æ–¥–æ–≤):**
- –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å `Games.insert()`, `Games.update()`, `Games.remove()`
- –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ DDP (Distributed Data Protocol)
- –ù–æ —ç—Ç–æ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ! –ü–æ–∑–∂–µ –Ω–∞—É—á–∏–º—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã

### üìù –ó–∞–¥–∞–Ω–∏–µ

1. –°–æ–∑–¥–∞–π —Ñ–∞–π–ª `/imports/types/Game.ts`:
   - –û–ø—Ä–µ–¥–µ–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Game` —Å –ø–æ–ª—è–º–∏:
     - `_id?: string` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, MongoDB —Å–∞–º –¥–æ–±–∞–≤–∏—Ç)
     - `board: (string | null)[]` (–º–∞—Å—Å–∏–≤ –∏–∑ 9 —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
     - `currentPlayer: 'X' | 'O'`
     - `status: 'waiting' | 'playing' | 'finished'`
     - `winner?: 'X' | 'O' | 'draw'`

2. –°–æ–∑–¥–∞–π —Ñ–∞–π–ª `/imports/collections/Games.ts`:
   - –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π `Mongo` –∏–∑ `meteor/mongo`
   - –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π —Ç–∏–ø `Game`
   - –°–æ–∑–¥–∞–π –∫–æ–ª–ª–µ–∫—Ü–∏—é: `export const Games = new Mongo.Collection<Game>('games')`
   - –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π —ç—Ç—É –∫–æ–ª–ª–µ–∫—Ü–∏—é –≤ `server/main.ts` (—á—Ç–æ–±—ã –æ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∞—Å—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)

3. –ò–∑–º–µ–Ω–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `GameBoard.tsx`:
   - –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π `Games` –∫–æ–ª–ª–µ–∫—Ü–∏—é
   - –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π `useTracker` –∏–∑ `meteor/react-meteor-data`
   - –í–º–µ—Å—Ç–æ `useState` –∏—Å–ø–æ–ª—å–∑—É–π `useTracker` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–≥—Ä—ã –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
   - –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–ª–µ—Ç–∫—É –∏—Å–ø–æ–ª—å–∑—É–π `Games.update()` –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ—Å–∫–∏
   - –°–æ–∑–¥–∞–π –Ω–∞—á–∞–ª—å–Ω—É—é –∏–≥—Ä—É –≤ `useEffect` (–µ—Å–ª–∏ –∏–≥—Ä—ã –Ω–µ—Ç, —Å–æ–∑–¥–∞–π —á–µ—Ä–µ–∑ `Games.insert()`)

4. –ü—Ä–æ–≤–µ—Ä—å —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:
   - –û—Ç–∫—Ä–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –¥–≤—É—Ö –≤–∫–ª–∞–¥–∫–∞—Ö –±—Ä–∞—É–∑–µ—Ä–∞
   - –°–¥–µ–ª–∞–π —Ö–æ–¥ –≤ –æ–¥–Ω–æ–π –≤–∫–ª–∞–¥–∫–µ
   - –í—Ç–æ—Ä–∞—è –≤–∫–ª–∞–¥–∫–∞ –¥–æ–ª–∂–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç—å—Å—è!

**–¶–µ–ª—å:** –ü–æ–Ω—è—Ç—å –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∏ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å. –£–≤–∏–¥–µ—Ç—å real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –¥–µ–π—Å—Ç–≤–∏–∏.

---

## ‚ö° –≠—Ç–∞–ø 3: –ú–µ—Ç–æ–¥—ã (Methods) - –°–µ—Ä–≤–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞ (40 –º–∏–Ω)

### üìö –¢–µ–æ—Ä–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞ –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º:**
- –ö–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å –ª—é–±—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –ù–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ!

**Meteor Methods:**
- `Meteor.methods()` - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–µ—Ç–æ–¥—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –ú–µ—Ç–æ–¥—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –ö–ª–∏–µ–Ω—Ç –≤—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥ —á–µ—Ä–µ–∑ `Meteor.call()` –∏–ª–∏ `Meteor.apply()`
- –í –º–µ—Ç–æ–¥–∞—Ö –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ `this.userId` (–µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ—Ç–æ–¥–∞:**
```typescript
Meteor.methods({
  'methodName'(arg1, arg2) {
    // –í–∞–ª–∏–¥–∞—Ü–∏—è
    check(arg1, String);
    check(arg2, Number);
    
    // –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
    // –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–π
    
    return result;
  }
});
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è —Å `check()`:**
- `check(value, type)` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∏–ø –∑–Ω–∞—á–µ–Ω–∏—è
- –¢–∏–ø—ã: `String`, `Number`, `Boolean`, `Object`, `Array`, `Match.Any`, –∏ —Ç.–¥.
- –ï—Å–ª–∏ —Ç–∏–ø –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç - –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞

**–í—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ —Å –∫–ª–∏–µ–Ω—Ç–∞:**
```typescript
Meteor.call('methodName', arg1, arg2, (error, result) => {
  if (error) {
    // –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
  } else {
    // –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ result
  }
});
```

**–ò–ª–∏ —Å async/await:**
```typescript
try {
  const result = await Meteor.callAsync('methodName', arg1, arg2);
} catch (error) {
  // –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
}
```

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –í—Å—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –ö–ª–∏–µ–Ω—Ç –Ω–µ –º–æ–∂–µ—Ç –æ–±–æ–π—Ç–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é
- –ú–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ `this.userId`

### üìù –ó–∞–¥–∞–Ω–∏–µ

1. –°–æ–∑–¥–∞–π —Ñ–∞–π–ª `/server/methods/games.ts`:
   - –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π `Meteor` –∏ `check` –∏–∑ `meteor/meteor`
   - –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π `Match` –∏–∑ `meteor/check`
   - –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π –∫–æ–ª–ª–µ–∫—Ü–∏—é `Games`
   - –°–æ–∑–¥–∞–π –º–µ—Ç–æ–¥ `'games.create'`:
     - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `_id` —Å–æ–∑–¥–∞–Ω–Ω–æ–π –∏–≥—Ä—ã
     - –°–æ–∑–¥–∞–µ—Ç –∏–≥—Ä—É —Å –ø—É—Å—Ç–æ–π –¥–æ—Å–∫–æ–π, `currentPlayer: 'X'`, `status: 'waiting'`
   - –°–æ–∑–¥–∞–π –º–µ—Ç–æ–¥ `'games.makeMove'`:
     - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç `gameId: string` –∏ `position: number`
     - –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç—ã —Å –ø–æ–º–æ—â—å—é `check()`
     - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –∏–≥—Ä–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
     - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –∫–ª–µ—Ç–∫–∞ –ø—É—Å—Ç–∞—è
     - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ —Å–µ–π—á–∞—Å —Ö–æ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞ (–º–æ–∂–Ω–æ —É–ø—Ä–æ—Å—Ç–∏—Ç—å –ø–æ–∫–∞)
     - –û–±–Ω–æ–≤–ª—è–µ—Ç –¥–æ—Å–∫—É
     - –ú–µ–Ω—è–µ—Ç `currentPlayer` –Ω–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–≥–æ
     - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –µ—Å—Ç—å –ª–∏ –ø–æ–±–µ–¥–∏—Ç–µ–ª—å (–º–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é)
     - –ï—Å–ª–∏ –µ—Å—Ç—å –ø–æ–±–µ–¥–∏—Ç–µ–ª—å - –æ–±–Ω–æ–≤–ª—è–µ—Ç `status: 'finished'` –∏ `winner`
     - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é –∏–≥—Ä—É

2. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π —Ñ–∞–π–ª –º–µ—Ç–æ–¥–æ–≤ –≤ `server/main.ts`

3. –ò–∑–º–µ–Ω–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `GameBoard.tsx`:
   - –£–±–µ—Ä–∏ –ø—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `Games.insert()` –∏ `Games.update()`
   - –ò—Å–ø–æ–ª—å–∑—É–π `Meteor.call()` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–≥—Ä—ã
   - –ò—Å–ø–æ–ª—å–∑—É–π `Meteor.call()` –¥–ª—è —Ö–æ–¥–∞
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π –æ—à–∏–±–∫–∏ (–ø–æ–∫–∞–∂–∏ alert –∏–ª–∏ console.error)

4. –°–æ–∑–¥–∞–π —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è:
   - –í `/imports/utils/gameLogic.ts`
   - –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–æ—Å–∫—É –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 'X', 'O', 'draw', –∏–ª–∏ null
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ (3 —Å—Ç—Ä–æ–∫–∏, 3 —Å—Ç–æ–ª–±—Ü–∞, 2 –¥–∏–∞–≥–æ–Ω–∞–ª–∏)

**–¶–µ–ª—å:** –ü–æ–Ω—è—Ç—å –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –º–µ—Ç–æ–¥—ã, –≤–∞–ª–∏–¥–∞—Ü–∏—è, –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å. –í—Å—è –ª–æ–≥–∏–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

---

## ‚ö° –≠—Ç–∞–ø 4: –ü—É–±–ª–∏–∫–∞—Ü–∏–∏ –∏ –ø–æ–¥–ø–∏—Å–∫–∏ (30 –º–∏–Ω)

### üìö –¢–µ–æ—Ä–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –°–µ–π—á–∞—Å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º –∫–ª–∏–µ–Ω—Ç–∞–º
- –ù–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ —Ç–µ–º, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –≤–∏–¥–∏—Ç –∫–ª–∏–µ–Ω—Ç
- –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ –∏ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ

**–ü—É–±–ª–∏–∫–∞—Ü–∏–∏ (Publications):**
- `Meteor.publish()` - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –∫–ª–∏–µ–Ω—Ç—É
- –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç Cursor (—Ä–µ–∑—É–ª—å—Ç–∞—Ç `Collection.find()`)
- –ú–æ–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å, –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –ø–æ–ª—è, –¥–æ–±–∞–≤–ª—è—Ç—å –ª–æ–≥–∏–∫—É

**–ü–æ–¥–ø–∏—Å–∫–∏ (Subscriptions):**
- `Meteor.subscribe()` - –∫–ª–∏–µ–Ω—Ç –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏—é
- –î–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è
- `useSubscribe()` - React hook –¥–ª—è –ø–æ–¥–ø–∏—Å–æ–∫
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `isLoading` - —Ñ–ª–∞–≥ –∑–∞–≥—Ä—É–∑–∫–∏

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```typescript
// –°–µ—Ä–≤–µ—Ä
Meteor.publish('publicationName', function() {
  return Collection.find({ /* —Ñ–∏–ª—å—Ç—Ä */ });
});

// –ö–ª–∏–µ–Ω—Ç
const isLoading = useSubscribe('publicationName');
const data = useTracker(() => Collection.find().fetch());
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- **–ú–µ—Ç–æ–¥—ã** - –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π (—Å–æ–∑–¥–∞—Ç—å, –∏–∑–º–µ–Ω–∏—Ç—å, —É–¥–∞–ª–∏—Ç—å)
- **–ü—É–±–ª–∏–∫–∞—Ü–∏–∏** - –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (—Å–ø–∏—Å–æ–∫, –¥–µ—Ç–∞–ª–∏)

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –í –ø—É–±–ª–∏–∫–∞—Ü–∏—è—Ö –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å `this.userId`
- –ú–æ–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ –ø—Ä–∞–≤–∞–º –¥–æ—Å—Ç—É–ø–∞
- –ú–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –ø–æ–ª—è —á–µ—Ä–µ–∑ `fields: { field1: 1, field2: 1 }`

### üìù –ó–∞–¥–∞–Ω–∏–µ

1. –°–æ–∑–¥–∞–π —Ñ–∞–π–ª `/server/publications/games.ts`:
   - –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π `Meteor` –∏–∑ `meteor/meteor`
   - –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π –∫–æ–ª–ª–µ–∫—Ü–∏—é `Games`
   - –°–æ–∑–¥–∞–π –ø—É–±–ª–∏–∫–∞—Ü–∏—é `'games'`:
     - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ –∏–≥—Ä—ã: `Games.find()`
   - –°–æ–∑–¥–∞–π –ø—É–±–ª–∏–∫–∞—Ü–∏—é `'game'`:
     - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç `gameId` –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä
     - –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç `gameId` —Å –ø–æ–º–æ—â—å—é `check()`
     - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–¥–Ω—É –∏–≥—Ä—É: `Games.find({ _id: gameId })`

2. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π —Ñ–∞–π–ª –ø—É–±–ª–∏–∫–∞—Ü–∏–π –≤ `server/main.ts`

3. –ò–∑–º–µ–Ω–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `GameBoard.tsx`:
   - –ò—Å–ø–æ–ª—å–∑—É–π `useSubscribe('game', gameId)` –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∏–≥—Ä—É
   - –ò—Å–ø–æ–ª—å–∑—É–π `isLoading` –¥–ª—è –ø–æ–∫–∞–∑–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–≥—Ä—É–∑–∫–∏
   - –£–±–µ—Ä–∏ –ø—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (–∏—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ `useTracker`)

4. –°–æ–∑–¥–∞–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `GameList.tsx`:
   - –ü–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏—é `'games'`
   - –ü–æ–∫–∞–∂–∏ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∏–≥—Ä
   - –ü–æ–∫–∞–∂–∏ —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥–æ–π –∏–≥—Ä—ã
   - –î–æ–±–∞–≤—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –∏–≥—Ä—É –∏ –ø–µ—Ä–µ–π—Ç–∏ –∫ –Ω–µ–π

**–¶–µ–ª—å:** –ü–æ–Ω—è—Ç—å —Å–∏—Å—Ç–µ–º—É –ø—É–±–ª–∏–∫–∞—Ü–∏–π/–ø–æ–¥–ø–∏—Å–æ–∫. –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –∫–ª–∏–µ–Ω—Ç—É.

---

## ‚ö° –≠—Ç–∞–ø 5: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (20 –º–∏–Ω)

### üìö –¢–µ–æ—Ä–∏—è

**Accounts —Å–∏—Å—Ç–µ–º–∞:**
- Meteor –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü–∞–∫–µ—Ç `accounts-base` - –±–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- –ü–∞–∫–µ—Ç `accounts-password` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ email/–ø–∞—Ä–æ–ª—å
- –ü–∞–∫–µ—Ç `accounts-ui` - –≥–æ—Ç–æ–≤—ã–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
- `this.userId` - ID —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –º–µ—Ç–æ–¥–∞—Ö
- `Meteor.users` - –∫–æ–ª–ª–µ–∫—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è)

**–ù–∞ –∫–ª–∏–µ–Ω—Ç–µ:**
- `Meteor.userId()` - ID —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `Meteor.user()` - –æ–±—ä–µ–∫—Ç —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `Meteor.loggingIn()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤—Ö–æ–¥–∞
- `Meteor.loginWithPassword(email, password)`
- `Meteor.logout()`

**–†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:**
- `Meteor.user()` —Ä–µ–∞–∫—Ç–∏–≤–µ–Ω
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ `useTracker(() => Meteor.user())`

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –í –º–µ—Ç–æ–¥–∞—Ö –ø—Ä–æ–≤–µ—Ä—è–π `if (!this.userId) throw new Meteor.Error(...)`
- –í –ø—É–±–ª–∏–∫–∞—Ü–∏—è—Ö —Ñ–∏–ª—å—Ç—Ä—É–π –¥–∞–Ω–Ω—ã–µ –ø–æ `this.userId`

### üìù –ó–∞–¥–∞–Ω–∏–µ

1. –£—Å—Ç–∞–Ω–æ–≤–∏ –ø–∞–∫–µ—Ç—ã:
   ```bash
   meteor add accounts-password
   ```

2. –°–æ–∑–¥–∞–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `LoginForm.tsx`:
   - –ü–æ–ª—è: email, password
   - –ö–Ω–æ–ø–∫–∞ "–í–æ–π—Ç–∏"
   - –ö–Ω–æ–ø–∫–∞ "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è"
   - –ò—Å–ø–æ–ª—å–∑—É–π `Meteor.loginWithPassword()` –¥–ª—è –≤—Ö–æ–¥–∞
   - –ò—Å–ø–æ–ª—å–∑—É–π `Accounts.createUser()` –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π –æ—à–∏–±–∫–∏

3. –°–æ–∑–¥–∞–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `UserInfo.tsx`:
   - –ü–æ–∫–∞–∂–∏ email —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ö–Ω–æ–ø–∫–∞ "–í—ã–π—Ç–∏" (–∏—Å–ø–æ–ª—å–∑—É–π `Meteor.logout()`)
   - –ò—Å–ø–æ–ª—å–∑—É–π `useTracker(() => Meteor.user())` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

4. –û–±–Ω–æ–≤–∏ –º–µ—Ç–æ–¥—ã –≤ `/server/methods/games.ts`:
   - –í `'games.create'` –ø—Ä–æ–≤–µ—Ä—è–π —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
   - –°–æ—Ö—Ä–∞–Ω—è–π `createdBy: this.userId` –≤ –∏–≥—Ä–µ
   - –í `'games.makeMove'` –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ –∏–≥—Ä–µ

5. –û–±–Ω–æ–≤–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `GameBoard.tsx`:
   - –ü–æ–∫–∞–∂–∏ –∫—Ç–æ —Å–æ–∑–¥–∞–ª –∏–≥—Ä—É
   - –ü–æ–∫–∞–∂–∏ —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞

**–¶–µ–ª—å:** –ü–æ–Ω—è—Ç—å —Å–∏—Å—Ç–µ–º—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏. –ü—Ä–∏–≤—è–∑–∞—Ç—å –∏–≥—Ä—ã –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.

---

## ‚ö° –≠—Ç–∞–ø 6: –ü—Ä—è–º–∞—è —Ä–∞–±–æ—Ç–∞ —Å MongoDB –Ω–∞ –±—ç–∫–µ–Ω–¥–µ (30 –º–∏–Ω)

### üìö –¢–µ–æ—Ä–∏—è

**MongoDB –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
- –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –∫–æ–ª–ª–µ–∫—Ü–∏—è - —ç—Ç–æ –ø—Ä—è–º–∞—è —Å–≤—è–∑—å —Å MongoDB
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ MongoDB –æ–ø–µ—Ä–∞—Ü–∏–∏: `find()`, `findOne()`, `insert()`, `update()`, `remove()`, `upsert()`
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MongoDB –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã: `$set`, `$push`, `$inc`, `$pull`, –∏ —Ç.–¥.
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π, –ª–∏–º–∏—Ç–∞–º–∏

**MongoDB –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã:**
- `$set` - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è
- `$push` - –¥–æ–±–∞–≤–∏—Ç—å –≤ –º–∞—Å—Å–∏–≤
- `$inc` - —É–≤–µ–ª–∏—á–∏—Ç—å —á–∏—Å–ª–æ
- `$pull` - —É–¥–∞–ª–∏—Ç—å –∏–∑ –º–∞—Å—Å–∏–≤–∞
- `$unset` - —É–¥–∞–ª–∏—Ç—å –ø–æ–ª–µ
- `$addToSet` - –¥–æ–±–∞–≤–∏—Ç—å –≤ –º–∞—Å—Å–∏–≤ –µ—Å–ª–∏ –Ω–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–∞

**–ò–Ω–¥–µ–∫—Å—ã:**
- –£—Å–∫–æ—Ä—è—é—Ç –ø–æ–∏—Å–∫ –ø–æ –ø–æ–ª—è–º
- –°–æ–∑–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `Collection._ensureIndex()` –∏–ª–∏ `Collection.createIndex()`
- –ü–æ–ª–µ–∑–Ω—ã –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–æ–ª–µ–π (userId, status, createdAt)

**Startup –∫–æ–¥:**
- `Meteor.startup()` - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö, —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ MongoDB:**
- `Games.rawCollection()` - –¥–æ—Å—Ç—É–ø –∫ –Ω–∞—Ç–∏–≤–Ω–æ–π MongoDB –∫–æ–ª–ª–µ–∫—Ü–∏–∏
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MongoDB –¥—Ä–∞–π–≤–µ—Ä –Ω–∞–ø—Ä—è–º—É—é
- –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–∞–≥—Ä–µ–≥–∞—Ü–∏–∏, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏)

**–ê–≥—Ä–µ–≥–∞—Ü–∏–∏:**
- –°–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π, –≤—ã—á–∏—Å–ª–µ–Ω–∏—è–º–∏
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `rawCollection().aggregate()`

### üìù –ó–∞–¥–∞–Ω–∏–µ

1. –°–æ–∑–¥–∞–π —Ñ–∞–π–ª `/server/startup/indexes.ts`:
   - –ò—Å–ø–æ–ª—å–∑—É–π `Meteor.startup()` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤
   - –°–æ–∑–¥–∞–π –∏–Ω–¥–µ–∫—Å –Ω–∞ `Games` –∫–æ–ª–ª–µ–∫—Ü–∏–∏:
     - –ò–Ω–¥–µ–∫—Å –Ω–∞ `status` (–¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏–≥—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É)
     - –ò–Ω–¥–µ–∫—Å –Ω–∞ `player1` –∏ `player2` (–¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–≥—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
     - –°–æ—Å—Ç–∞–≤–Ω–æ–π –∏–Ω–¥–µ–∫—Å –Ω–∞ `status` –∏ `createdAt` (–¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏)

2. –û–±–Ω–æ–≤–∏ –º–µ—Ç–æ–¥—ã –≤ `/server/methods/games.ts`:
   - –í `'games.create'` –∏—Å–ø–æ–ª—å–∑—É–π MongoDB –æ–ø–µ—Ä–∞—Ç–æ—Ä `$set` –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ `createdAt: new Date()`
   - –í `'games.makeMove'` –∏—Å–ø–æ–ª—å–∑—É–π `$set` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ—Å–∫–∏ –∏ `$inc` –¥–ª—è —Å—á–µ—Ç—á–∏–∫–∞ —Ö–æ–¥–æ–≤ (–µ—Å–ª–∏ –¥–æ–±–∞–≤–∏—à—å –ø–æ–ª–µ `moveCount`)
   - –°–æ–∑–¥–∞–π –º–µ—Ç–æ–¥ `'games.getStats'`:
     - –ò—Å–ø–æ–ª—å–∑—É–π `Games.find()` —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –∏ `count()` –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞:
       - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
       - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–±–µ–¥
       - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ä–∞–∂–µ–Ω–∏–π
     - –ò—Å–ø–æ–ª—å–∑—É–π `findOne()` —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –∏–≥—Ä—ã

3. –°–æ–∑–¥–∞–π —Ñ–∞–π–ª `/server/startup/cleanup.ts`:
   - –í `Meteor.startup()` —Å–æ–∑–¥–∞–π –∑–∞–¥–∞—á—É –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞—Ä—ã—Ö –∏–≥—Ä:
     - –ò—Å–ø–æ–ª—å–∑—É–π `Games.remove()` –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∏–≥—Ä —Å—Ç–∞—Ä—à–µ 24 —á–∞—Å–æ–≤
     - –ò—Å–ø–æ–ª—å–∑—É–π —Ñ–∏–ª—å—Ç—Ä —Å `createdAt` –∏ `$lt` –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º
   - (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ò—Å–ø–æ–ª—å–∑—É–π `Meteor.setInterval()` –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏

4. –°–æ–∑–¥–∞–π –º–µ—Ç–æ–¥ `'games.getLeaderboard'`:
   - –ò—Å–ø–æ–ª—å–∑—É–π `Games.find()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∏–≥—Ä
   - –ì—Ä—É–ø–ø–∏—Ä—É–π –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏ —Å—á–∏—Ç–∞–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π –ø—Ä–æ—Å—Ç–æ–π –ø–æ–¥—Ö–æ–¥: `find()` —Å —Ñ–∏–ª—å—Ç—Ä–æ–º `status: 'finished'`, –∑–∞—Ç–µ–º –æ–±—Ä–∞–±–æ—Ç–∞–π –Ω–∞ JavaScript
   - –í–µ—Ä–Ω–∏ —Ç–æ–ø-10 –∏–≥—Ä–æ–∫–æ–≤ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø–æ–±–µ–¥

5. –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π —Å MongoDB –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏:
   - –í –º–µ—Ç–æ–¥–µ `'games.makeMove'` –∏—Å–ø–æ–ª—å–∑—É–π `$push` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ —Ö–æ–¥–æ–≤ (–µ—Å–ª–∏ –¥–æ–±–∞–≤–∏—à—å –ø–æ–ª–µ `moves`)
   - –ò—Å–ø–æ–ª—å–∑—É–π `$addToSet` –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏–≥—Ä–æ–∫–æ–≤ –±–µ–∑ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

**–¶–µ–ª—å:** –ü–æ–Ω—è—Ç—å –ø—Ä—è–º—É—é —Ä–∞–±–æ—Ç—É —Å MongoDB –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –ò–Ω–¥–µ–∫—Å—ã, –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã, startup –∫–æ–¥.

---

## ‚ö° –≠—Ç–∞–ø 7: Real-time –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä (20 –º–∏–Ω)

### üìö –¢–µ–æ—Ä–∏—è

**–†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å = Real-time:**
- –ë–ª–∞–≥–æ–¥–∞—Ä—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, real-time —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!
- –ö–æ–≥–¥–∞ –æ–¥–∏–Ω –∫–ª–∏–µ–Ω—Ç –∏–∑–º–µ–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥, –¥—Ä—É–≥–∏–µ –∫–ª–∏–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ DDP (Distributed Data Protocol)

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ò–≥—Ä–æ–∫ 1 –≤—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥ `makeMove`
2. –ú–µ—Ç–æ–¥ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–ª–ª–µ–∫—Ü–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
3. –°–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—Å–µ–º –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º
4. `useTracker` –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –ò–≥—Ä–æ–∫–∞ 2 –≤–∏–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ
5. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–≤–∞–µ—Ç—Å—è

**–û—á–µ—Ä–µ–¥—å —Ö–æ–¥–æ–≤:**
- –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —á–µ–π —Å–µ–π—á–∞—Å —Ö–æ–¥
- –ú–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å `player1` –∏ `player2` –≤ –∏–≥—Ä–µ
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `currentPlayer` –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫—Ç–æ –¥–µ–ª–∞–µ—Ç —Ö–æ–¥

**–°—Ç–∞—Ç—É—Å—ã –∏–≥—Ä—ã:**
- `'waiting'` - –∏–≥—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞, –∂–¥–µ—Ç –≤—Ç–æ—Ä–æ–≥–æ –∏–≥—Ä–æ–∫–∞
- `'playing'` - –∏–¥–µ—Ç –∏–≥—Ä–∞
- `'finished'` - –∏–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞

### üìù –ó–∞–¥–∞–Ω–∏–µ

1. –û–±–Ω–æ–≤–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Game`:
   - –î–æ–±–∞–≤—å `player1?: string` (userId –ø–µ—Ä–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞)
   - –î–æ–±–∞–≤—å `player2?: string` (userId –≤—Ç–æ—Ä–æ–≥–æ –∏–≥—Ä–æ–∫–∞)
   - –î–æ–±–∞–≤—å `createdAt?: Date` (–¥–ª—è –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ –æ—á–∏—Å—Ç–∫–∏)

2. –û–±–Ω–æ–≤–∏ –º–µ—Ç–æ–¥ `'games.create'`:
   - –°–æ—Ö—Ä–∞–Ω—è–π `player1: this.userId`
   - –°—Ç–∞—Ç—É—Å `'waiting'`
   - `createdAt: new Date()`

3. –°–æ–∑–¥–∞–π –º–µ—Ç–æ–¥ `'games.join'`:
   - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç `gameId`
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –∏–≥—Ä–∞ –≤ —Å—Ç–∞—Ç—É—Å–µ `'waiting'`
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Å–æ–∑–¥–∞—Ç–µ–ª—å –∏–≥—Ä—ã
   - –ò—Å–ø–æ–ª—å–∑—É–π `Games.update()` —Å `$set` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `player2` –∏ `status`

4. –û–±–Ω–æ–≤–∏ –º–µ—Ç–æ–¥ `'games.makeMove'`:
   - –ü—Ä–æ–≤–µ—Ä—è–π —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - —ç—Ç–æ `player1` –∏–ª–∏ `player2`
   - –ü—Ä–æ–≤–µ—Ä—è–π —á—Ç–æ —Å–µ–π—á–∞—Å —Ö–æ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞ (–µ—Å–ª–∏ `currentPlayer === 'X'`, —Ç–æ –¥–æ–ª–∂–µ–Ω —Ö–æ–¥–∏—Ç—å `player1`)
   - –ò—Å–ø–æ–ª—å–∑—É–π MongoDB –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

5. –û–±–Ω–æ–≤–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `GameBoard.tsx`:
   - –ü–æ–∫–∞–∂–∏ —Å—Ç–∞—Ç—É—Å –∏–≥—Ä—ã
   - –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å `'waiting'` - –ø–æ–∫–∞–∂–∏ –∫–Ω–æ–ø–∫—É "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è" (–≤—ã–∑—ã–≤–∞–µ—Ç `'games.join'`)
   - –ü–æ–∫–∞–∂–∏ —á–µ–π —Å–µ–π—á–∞—Å —Ö–æ–¥
   - –ü–æ–∫–∞–∂–∏ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è –µ—Å–ª–∏ –∏–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞
   - –û—Ç–∫–ª—é—á–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ö–æ–¥–∞ –µ—Å–ª–∏ –Ω–µ —Ç–≤–æ—è –æ—á–µ—Ä–µ–¥—å

6. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä:
   - –û—Ç–∫—Ä–æ–π –¥–≤–µ –≤–∫–ª–∞–¥–∫–∏
   - –í–æ–π–¥–∏ –ø–æ–¥ —Ä–∞–∑–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
   - –°–æ–∑–¥–∞–π –∏–≥—Ä—É –≤ –æ–¥–Ω–æ–π –≤–∫–ª–∞–¥–∫–µ
   - –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Å—å –≤ –¥—Ä—É–≥–æ–π
   - –°–¥–µ–ª–∞–π —Ö–æ–¥ - –≤—Ç–æ—Ä–∞—è –≤–∫–ª–∞–¥–∫–∞ –¥–æ–ª–∂–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç—å—Å—è!

**–¶–µ–ª—å:** –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ real-time —Ä–∞–±–æ—Ç–∞–µ—Ç. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä.

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ (—á—Ç–æ –∏–∑—É—á–∏–ª–∏):

1. ‚úÖ **–ö–æ–ª–ª–µ–∫—Ü–∏–∏** - `Mongo.Collection`, —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, Minimongo –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
2. ‚úÖ **–†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** - `useTracker()`, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
3. ‚úÖ **–ú–µ—Ç–æ–¥—ã** - `Meteor.methods()`, —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞, –≤–∞–ª–∏–¥–∞—Ü–∏—è, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
4. ‚úÖ **–ü—É–±–ª–∏–∫–∞—Ü–∏–∏/–ü–æ–¥–ø–∏—Å–∫–∏** - –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º, `Meteor.publish()`, `useSubscribe()`
5. ‚úÖ **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - `accounts-password`, `Meteor.userId()`, `Meteor.user()`
6. ‚úÖ **MongoDB –Ω–∞ –±—ç–∫–µ–Ω–¥–µ** - –ø—Ä—è–º—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –∏–Ω–¥–µ–∫—Å—ã, –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã ($set, $push, $inc), startup –∫–æ–¥
7. ‚úÖ **Real-time** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ DDP

---

## üí° –ì–ª–∞–≤–Ω—ã–µ –æ—Ç–ª–∏—á–∏—è Meteor –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ React:

1. **–†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** - –¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç UI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –Ω–µ –Ω—É–∂–Ω—ã —Ä—É—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
2. **–ú–µ—Ç–æ–¥—ã** - –±–µ–∑–æ–ø–∞—Å–Ω–∞—è —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤–º–µ—Å—Ç–æ REST API
3. **–ü—É–±–ª–∏–∫–∞—Ü–∏–∏** - –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç—É
4. **Real-time –∏–∑ –∫–æ—Ä–æ–±–∫–∏** - –Ω–µ –Ω—É–∂–Ω—ã WebSockets/SSE, –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
5. **–û–¥–Ω–∞ –∫–æ–¥–æ–≤–∞—è –±–∞–∑–∞** - –∫–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä –≤ –æ–¥–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ, –æ–±—â–∏–µ —Ç–∏–ø—ã –∏ —É—Ç–∏–ª–∏—Ç—ã

---

**–ì–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å? –ù–∞—á–∏–Ω–∞–µ–º —Å –≠—Ç–∞–ø–∞ 1!** ‚ö°
